{% extends 'User/base.html' %}

{% block title %}
    Profile
{% endblock %}

{% load crispy_forms_tags %}

{% block content %}


  <div class="container mt-5">
    <div class="main-body jumbotron" style="box-shadow: rgba(17, 17, 26, 0.1) 0px 8px 24px, rgba(17, 17, 26, 0.1) 0px 16px 56px, rgba(17, 17, 26, 0.1) 0px 24px 80px;background-color: #D6F7E7;">
          
      <nav class="navbar">
            <span class="text-dark py-1 h1">Profile Information</span>
          </nav>

          <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex flex-column align-items-center text-center">
                    <img src="{{ user.profile.image.url }}" alt="Admin" class="rounded-circle" width="150">
                    <div class="mt-3">
                      <h4>{{user.username}}</h4>
                      <a class="btn btn-outline-success"href="{% url 'profile-update' %}">Edit Profile</a>
                      <a class="btn btn-outline-success"href="{% url 'change-password' %}">Change Password</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-8">
              <div class="card mb-3">
                <div class="card-body">
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">User Name</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.username}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">First Name</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.first_name}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Last Name</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.last_name}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Institution</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.profile.institution}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Email</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.email}}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
    </div>
    
    <div class="card">
      <div class="card-body">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">User</th>
              <th scope="col">Problem ID</th>
              <th scope="col">Problem Name</th>
              <th scope="col">Submission_time</th>
              <th scope="col">Verdict</th>
              <th scope="col">Run Time</th>
            </tr>
          </thead>

          <tbody>
            {% for submission in submission_list  %}
              <tr>
                <td>{{submission.user}}</td>
                <td>{{submission.problem_id}}</td>
                <td>{{submission.problem_name}}</td>
                <td>{{submission.submission_time}}</td>
                <td class="text-success">{{submission.verdict}}</td>
                <td>{{submission.run_time}}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        
      </div>
      
    </div>
    
  </div>
{% endblock %}
